(this.webpackJsonpAlbumBuddy=this.webpackJsonpAlbumBuddy||[]).push([[0],{52:function(e,t,s){},77:function(e,t,s){},78:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){},85:function(e,t,s){"use strict";s.r(t);var i=s(0),a=s(1),n=s.n(a),c=s(38),r=s.n(c),l=(s(52),s(24)),o=s.n(l),j=s(7),d=s(39),h=s(8),b=s(9),u=s(13),p=s(11),O=s(10),x=s(40),g=s(89),f=s(86),v=s(87),y=s(90),m=s(92),k=s(91),w=s(25),C=s.n(w),H=s(2),R=s.n(H),A=function(e){Object(p.a)(s,e);var t=Object(O.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(b.a)(s,[{key:"render",value:function(){return!1===this.props.condition?null:Object(i.jsx)(i.Fragment,{children:this.props.children})}}],[{key:"propTypes",get:function(){return{children:R.a.any,condition:R.a.bool.isRequired}}}]),s}(a.Component),N=s(43),P=s.n(N),S=(s(77),function(e){Object(p.a)(s,e);var t=Object(O.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(b.a)(s,[{key:"render",value:function(){return Object(i.jsx)("div",{id:"loading-icon",children:Object(i.jsx)(P.a,{height:32,width:5,radius:5,margin:15,color:void 0!==this.props.colour?this.props.colour:"#F5A623"})})}}]),s}(a.Component)),T=(s(78),function(e){Object(p.a)(s,e);var t=Object(O.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(b.a)(s,[{key:"render",value:function(){var e=this.props.catalogue[this.props.artist];return Object(i.jsx)(f.a,{className:"ArtistBanner",style:{height:180,backgroundImage:"url(".concat(e.cover,")")},children:Object(i.jsxs)(v.a,{children:[Object(i.jsx)(f.a,{children:Object(i.jsx)(v.a,{children:Object(i.jsx)("h3",{children:e.name})})}),Object(i.jsx)(f.a,{children:Object(i.jsx)(v.a,{children:Object(i.jsx)("p",{children:e.bio})})})]})})}}]),s}(a.Component)),F=s(46),B=function(e){Object(p.a)(s,e);var t=Object(O.a)(s);function s(e){var i;return Object(h.a)(this,s),(i=t.call(this,e)).selectArtistHandler=i.selectArtistHandler.bind(Object(u.a)(i)),i}return Object(b.a)(s,[{key:"selectArtistHandler",value:function(e){this.props.selectArtist(e.target.dataset.artist)}},{key:"render",value:function(){var e=this,t=this.props.artists.map((function(t){var s=t===e.props.artist?Object(i.jsx)("b",{children:e.props.catalogue[t].name}):e.props.catalogue[t].name;return Object(i.jsx)(F.a,{onClick:e.selectArtistHandler,"data-artist":t,children:s},t)}));return Object(i.jsx)(k.a,{children:t})}}]),s}(a.Component),_=s(21),I=function(e){Object(p.a)(s,e);var t=Object(O.a)(s);function s(){return Object(h.a)(this,s),t.apply(this,arguments)}return Object(b.a)(s,[{key:"render",value:function(){var e=Object.entries(this.props.links).map((function(e){var t=Object(_.a)(e,2),s=t[0],a=t[1];return Object(i.jsx)("li",{children:Object(i.jsx)("a",{href:a,children:s})},s)}));return Object(i.jsx)("ul",{children:e})}}]),s}(a.Component),M=function(e){Object(p.a)(s,e);var t=Object(O.a)(s);function s(e){var i;return Object(h.a)(this,s),(i=t.call(this,e)).state=Object(j.a)(Object(j.a)({},{artist:"",release:""}),e),i.selectReleaseHandler=i.selectReleaseHandler.bind(Object(u.a)(i)),i}return Object(b.a)(s,[{key:"selectReleaseHandler",value:function(e){this.props.selectRelease(e.target.dataset.release)}},{key:"render",value:function(){var e=this;return void 0===this.props.artist||""===this.props.artist||void 0===this.props.catalogue[this.props.artist].releases?Object(i.jsx)(i.Fragment,{}):Object.entries(this.props.catalogue[this.props.artist].releases).map((function(t){var s=Object(_.a)(t,2),a=s[0],n=s[1],c=a===e.props.release?Object(i.jsx)("b",{children:n.title}):n.title;return Object(i.jsx)(F.a,{onClick:e.selectReleaseHandler,"data-release":a,children:c},a)}))}}]),s}(a.Component),D=s(88),q=s(22),E=s(17),J=s(26),L=s(27),U=s(44),W=s.n(U),z=s(45);s(81);function G(e){e.catalogue,e.artist,e.release;var t=e.playingid,s=e.selectTrackHandler;return e.tracks.map((function(e,a){var n=a===t?Object(i.jsx)("b",{children:e.title}):e.title,c=e.files.map((function(e,t){var s=e.split(".").slice(-1)[0].toUpperCase(),a=e.split("/").slice(-1)[0];return Object(i.jsx)(D.a,{variant:"info",className:"TrackButton",onClick:function(){Object(z.saveAs)(e,a)},children:s},t)}));return Object(i.jsxs)(F.a,{className:"Track",children:[Object(i.jsxs)(f.a,{className:void 0===e.info?"snug":"",children:[Object(i.jsxs)(v.a,{onClick:s,"data-playingid":a,md:12,lg:8,children:[Object(i.jsx)(q.a,{icon:["far","play-circle"]})," ",n]}),Object(i.jsx)(v.a,{xs:12,sm:12,md:12,lg:4,children:Object(i.jsxs)("span",{className:"pull-right",children:[Object(i.jsx)(q.a,{icon:["fa","download"]}),"\xa0",c]})})]}),Object(i.jsx)(A,{condition:void 0!==e.info,children:Object(i.jsx)(f.a,{className:"snug track-info",children:Object(i.jsx)(v.a,{xs:12,children:Object(i.jsx)("quote",{children:e.info})})})})]},a)}))}E.b.add(J.b,J.a,L.b,L.a);var K=function(e){Object(p.a)(s,e);var t=Object(O.a)(s);function s(e){var i;return Object(h.a)(this,s),(i=t.call(this,e)).state=Object(j.a)(Object(j.a)({},{artist:"",release:"",playingid:0,catalogue:{},playing:!1,loading:!0,tracks:[],info:"",credits:{writing:[],performance:[],production:[],engineering:[]}}),e),i.selectTrackHandler=i.selectTrackHandler.bind(Object(u.a)(i)),i.playPauseHandler=i.playPauseHandler.bind(Object(u.a)(i)),i.waveform=n.a.createRef(),i}return Object(b.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.wavesurfer=W.a.create({container:this.waveform.current,waveColor:"grey",progressColor:"purple",responsive:!0,fillParent:!0,backend:"MediaElement",cursorWidth:0});var t=this.props.catalogue[this.props.artist].releases[this.props.release],s=t.tracks,i=void 0!==t.info?t.info:"",a=void 0!==t.credits?t.credits:{writing:[],production:[],engineering:[]},n={};n=Object(j.a)(Object(j.a)({},n),{tracks:s,info:i,credits:a}),this.setState(n),this.wavesurfer.on("ready",(function(){e.wavesurfer.play(),e.setState({loading:!1,playing:!0})})),this.wavesurfer.on("seek",(function(t){e.wavesurfer.isPlaying()||e.wavesurfer.play(),e.setState({playing:e.wavesurfer.isPlaying()})})),this.wavesurfer.on("finish",(function(){e.setState({loading:!0});var t=(e.state.playingid+1)%e.state.tracks.length;e.wavesurfer.load(s[t].files[0]),e.setState({playingid:t,playing:!0})})),this.wavesurfer.on("pause",(function(){e.wavesurfer.params.container.style.opacity=.7})),this.wavesurfer.on("play",(function(){e.wavesurfer.params.container.style.opacity=1}))}},{key:"componentWillUnmount",value:function(){this.wavesurfer.stop(),this.wavesurfer.empty(),this.wavesurfer.destroy()}},{key:"selectTrackHandler",value:function(e){var t=e.target.dataset.playingid,s=parseInt(t);void 0===t?(this.wavesurfer.playPause(),this.setState({playing:this.wavesurfer.isPlaying()})):void 0!==this.props.catalogue[this.props.artist].releases[this.props.release].tracks[s]&&s!==this.state.playingid&&(this.wavesurfer.pause(),this.setState({loading:!0}),this.wavesurfer.load(this.state.tracks[s].files[0]),this.setState({playingid:s,playing:!0}))}},{key:"playPauseHandler",value:function(){this.wavesurfer.playPause(),this.setState({playing:this.wavesurfer.isPlaying()})}},{key:"render",value:function(){if(void 0===this.props.artist||void 0===this.props.release||""===this.props.artist||""===this.props.release)return Object(i.jsx)(i.Fragment,{});var e=this.props.catalogue[this.props.artist].releases[this.props.release],t={};t.engineering=void 0!==e.credits&&void 0!==e.credits.engineering?e.credits.engineering:[],t.performance=void 0!==e.credits&&void 0!==e.credits.performance?e.credits.performance:[],t.production=void 0!==e.credits&&void 0!==e.credits.production?e.credits.production:[],t.writing=void 0!==e.credits&&void 0!==e.credits.writing?e.credits.writing:[];var s=t.engineering.length>0,a=t.performance.length>0,n=t.production.length>0,c=t.writing.length>0,r=s||a||n||c;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(f.a,{children:[Object(i.jsxs)(v.a,{xs:12,sm:12,md:8,lg:8,children:[Object(i.jsx)("h4",{children:e.title}),Object(i.jsx)(f.a,{children:Object(i.jsxs)(v.a,{children:[Object(i.jsx)("div",{id:"PlayPause",children:Object(i.jsx)(q.a,{icon:["far",!0===this.state.playing?"pause-circle":"play-circle"],size:"3x",onClick:this.playPauseHandler})}),Object(i.jsx)("div",{id:"waveform",ref:this.waveform,children:Object(i.jsx)(A,{condition:this.state.loading,children:Object(i.jsx)(S,{colour:"#eeeeee"})})})]})}),Object(i.jsx)(f.a,{children:Object(i.jsx)(v.a,{children:Object(i.jsx)(k.a,{children:Object(i.jsx)(G,{artist:this.props.artist,release:this.props.release,catalogue:this.props.catalogue,playingid:this.state.playingid,tracks:this.state.tracks,selectTrackHandler:this.selectTrackHandler})})})})]}),Object(i.jsxs)(v.a,{xs:12,sm:12,md:4,lg:4,children:[Object(i.jsx)(f.a,{children:Object(i.jsx)("img",{className:"ReleaseCover",alt:"Release Cover",src:e.cover})}),Object(i.jsxs)(A,{condition:void 0!==e.info,children:[Object(i.jsx)(f.a,{children:Object(i.jsx)("b",{children:"Release Info"})}),Object(i.jsx)(f.a,{children:e.info})]}),Object(i.jsxs)(A,{condition:void 0!==e.links&&"object"===typeof e.links&&Object.keys(e.links).length>0,children:[Object(i.jsx)(f.a,{children:Object(i.jsx)("b",{children:this.props.options.release_links})}),Object(i.jsx)(f.a,{children:Object(i.jsx)(I,{links:e.links})})]}),Object(i.jsxs)(A,{condition:!0===r,children:[Object(i.jsx)(f.a,{className:"snug",children:Object(i.jsx)("b",{children:this.props.options.credits})}),Object(i.jsxs)(A,{condition:s,children:[Object(i.jsx)(f.a,{className:"snug",children:Object(i.jsx)("b",{children:this.props.options.credits_engineering})}),Object(i.jsx)(f.a,{className:"snug",children:Object(i.jsx)("i",{children:t.engineering.join(", ")})})]}),Object(i.jsxs)(A,{condition:a,children:[Object(i.jsx)(f.a,{className:"snug",children:Object(i.jsx)("b",{children:this.props.options.credits_performance})}),Object(i.jsx)(f.a,{className:"snug",children:Object(i.jsx)("i",{children:t.performance.join(", ")})})]}),Object(i.jsxs)(A,{condition:n,children:[Object(i.jsx)(f.a,{className:"snug",children:Object(i.jsx)("b",{children:this.props.options.credits_production})}),Object(i.jsx)(f.a,{className:"snug",children:Object(i.jsx)("i",{children:t.production.join(", ")})})]}),Object(i.jsxs)(A,{condition:c,children:[Object(i.jsx)(f.a,{className:"snug",children:Object(i.jsx)("b",{children:this.props.options.credits_writing})}),Object(i.jsx)(f.a,{className:"snug",children:Object(i.jsx)("i",{children:t.writing.join(", ")})})]})]})]})]})})}}]),s}(a.Component),Q=(s(82),function(e){Object(p.a)(s,e);var t=Object(O.a)(s);function s(e){var i;return Object(h.a)(this,s),(i=t.call(this,e)).state={artists:[],catalogue:{},loading:!0,artist:"",release:"",showReleases:!1,bio:"",location:"",links:{}},i.selectArtist=i.selectArtist.bind(Object(u.a)(i)),i.selectRelease=i.selectRelease.bind(Object(u.a)(i)),i}return Object(b.a)(s,[{key:"componentDidMount",value:function(){var e=Object(d.a)(o.a.mark((function e(){var t,s,i,a,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t={}).loading=this.state.loading,e.next=4,C.a.get("/buddy.json");case 4:return s=e.sent,t.options=s.data,e.next=8,C.a.get("/catalogue.json");case 8:i=e.sent,a=i.data,n=Object.keys(i.data),t.catalogue=Object(j.a)(Object(j.a)({},a),{artists:n}),1===n.length&&(c=n[0],t=Object(j.a)(Object(j.a)(Object(j.a)({},t),{artist:c,artists:n,bio:a[c].bio,location:a[c].location,links:a[c].links}),a[c])),t.loading=!1,this.setState(t);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"selectArtist",value:function(e){var t={artist:"",release:"",showReleases:!1};void 0!==e&&(t=Object(j.a)(Object(j.a)(Object(j.a)({},t),{artist:e,bio:this.state.catalogue[e].bio,location:this.state.catalogue[e].location,links:this.state.catalogue[e].links}),this.state.catalogue[e])),e!==this.state.artist&&(t.release=""),this.setState(t)}},{key:"selectRelease",value:function(e){var t={release:"",showReleases:!1};void 0!==e&&(t=Object(j.a)(Object(j.a)({},t),{release:e,showReleases:!0})),this.setState(t)}},{key:"render",value:function(){return this.state.loading?Object(i.jsx)(S,{}):Object(i.jsxs)(g.a,{fluid:"lg",children:[Object(i.jsx)(x.a,{children:Object(i.jsx)("title",{children:this.state.options.title})}),Object(i.jsx)(f.a,{children:Object(i.jsx)(v.a,{children:Object(i.jsxs)("h1",{children:[Object(i.jsx)(A,{condition:void 0!==this.state.options.logo,children:Object(i.jsx)(y.a,{src:this.state.options.logo})})," ",void 0!==this.state.options.title?this.state.options.title:"AlbumBuddy"]})})}),Object(i.jsxs)(f.a,{children:[Object(i.jsxs)(v.a,{md:4,lg:3,children:[Object(i.jsxs)(A,{condition:this.state.artists.length>1,children:[Object(i.jsx)(f.a,{children:Object(i.jsxs)(v.a,{children:[Object(i.jsx)(m.a,{children:Object(i.jsx)(m.a.Header,{children:Object(i.jsx)("b",{children:this.state.options.roster})})}),Object(i.jsx)(B,{artist:this.state.artist,artists:this.state.artists,catalogue:this.state.catalogue,selectArtist:this.selectArtist})]})}),Object(i.jsx)(f.a,{children:Object(i.jsx)(v.a,{})})]}),Object(i.jsxs)(A,{condition:""!==this.state.artist,children:[Object(i.jsx)(A,{condition:""!==this.state.bio,children:Object(i.jsx)(f.a,{children:Object(i.jsx)(v.a,{children:Object(i.jsxs)(m.a,{children:[Object(i.jsx)(m.a.Header,{children:Object(i.jsx)("b",{children:this.state.options.artist_info})}),Object(i.jsxs)(m.a.Body,{children:[Object(i.jsx)(A,{condition:""!==this.state.location,children:Object(i.jsx)(f.a,{children:Object(i.jsxs)(v.a,{children:[Object(i.jsxs)("b",{children:[this.state.options.location,":"]})," ",this.state.location]})})}),Object(i.jsx)(f.a,{children:Object(i.jsx)(v.a,{children:Object(i.jsxs)("i",{children:[" ",this.state.bio," "]})})}),Object(i.jsx)(A,{condition:Object.keys(this.state.links).length>0,children:Object(i.jsx)(f.a,{children:Object(i.jsxs)(v.a,{children:[Object(i.jsxs)("b",{children:[this.state.options.links,":"]}),Object(i.jsx)("br",{}),Object(i.jsx)(I,{links:this.state.links})]})})})]})]})})})}),Object(i.jsx)(f.a,{children:Object(i.jsx)(v.a,{children:Object(i.jsxs)("b",{children:[this.state.options.releases,":"]})})}),Object(i.jsx)(f.a,{children:Object(i.jsx)(v.a,{children:Object(i.jsx)(k.a,{children:Object(i.jsx)(M,{artist:this.state.artist,release:this.state.release,catalogue:this.state.catalogue,selectRelease:this.selectRelease})})})})]})]}),Object(i.jsx)(v.a,{md:8,lg:9,children:Object(i.jsxs)(A,{condition:""!==this.state.artist,children:[Object(i.jsx)(T,{artist:this.state.artist,catalogue:this.state.catalogue}),Object(i.jsx)("br",{}),Object(i.jsx)(A,{condition:!0===this.state.showReleases,children:Object(i.jsx)(K,{artist:this.state.artist,release:this.state.release,catalogue:this.state.catalogue,options:this.state.options})})]})}),Object(i.jsx)(v.a,{children:"\xa0"})]})]})}}]),s}(a.Component)),V=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,93)).then((function(t){var s=t.getCLS,i=t.getFID,a=t.getFCP,n=t.getLCP,c=t.getTTFB;s(e),i(e),a(e),n(e),c(e)}))};s(83);r.a.render(Object(i.jsx)(n.a.StrictMode,{children:Object(i.jsx)(Q,{})}),document.getElementById("root")),V(console.log)}},[[85,1,2]]]);
//# sourceMappingURL=main.82be62b4.chunk.js.map